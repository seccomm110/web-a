<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Al-Mahdi</title>
    <link rel="stylesheet" href="css & js/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Lalezar&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css & js/dashboard.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
    <script src="css & js/dashboard.js"></script>




    <style>

        .bg-img{
            background-image: url('imgs/bg1.jpg'); 
            background-image: url('imgs/bg2.png'); 
            /* background-image: url('imgs/bg3.png');  */
            background-image: url('imgs/bg4.png'); 
            /* background-image: url('imgs/bg5.png');  */
            /* background-image: url('imgs/bg6.png');  */
            background-image: url('imgs/bg7.png'); 
            background-size: cover; /* Make the background cover the entire header */
        background-position: center; /* Center the background image */
        /* border-radius: 0px 0px 5px 5px; */
        z-index: 1000;
        }


    .arabic-text {
        font-family: 'Lalezar', cursive;
    }

    .header {
        display: flex;
        justify-content: space-between; /* Space between left and right content */
        align-items: center; /* Center vertically */
        padding: 150px; /* Increased height */
        border-radius: 5px;


        color: #ffffff; /* White text color */
    }

        .navbar {
            /* background-color: #3a8e3a; */
            /* background: rgb(9, 9, 17);; */
            backdrop-filter: blur(20px);
            padding: 10px;
            border-top: 2px solid #333; /* Set the border only at the top */
            color:red;
        }

        .nav-list {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;

        }

        .nav-item {
            margin-right: 20px;
            position: relative;
            overflow: visible;
            
        }


        .nav-item a {
            /* color: #333; */
            color:#fff;
            text-decoration: none;
            
        }

        .tab-content {
            padding: 20px;
            /* display: none; */
            
        }

        .upload-section {
            margin: 20px;
            padding: 10px;
            background-color: #e7f5e7;
            border-radius: 5px;
            position: relative;
        }

        /* .upload-button {
            background-color: #3a8e3a;
            color: white;
            border: none;
            cursor: pointer;
            padding: 10px 20px;
            border-radius: 5px;
            position: absolute;
            bottom: 10px;
            right: 10px;
        } */

        .upload-label {
            display: block;
            margin-bottom: 5px;
        }

        

    </style>

<script>
    document.addEventListener("DOMContentLoaded", function() {
    // Show the Dashboard by default on page load
    showContent("dashboard");
});

function showContent(contentType) {
    // Hide all sections
    document.querySelectorAll(".content").forEach(section => {
        section.style.display = "none";
    });

    // Show the selected section
    const contentSection = document.getElementById(contentType);
    if (contentSection) {
        contentSection.style.display = "block";
    }
}

// Add event listeners to navbar items
document.querySelectorAll(".nav-link").forEach(link => {
    link.addEventListener("click", function() {
        const target = this.getAttribute("data-target");
        showContent(target);
    });
});

    // Check if the user is authenticated
    if (!localStorage.getItem('isLoggedIn')) {
        window.location.href = 'index.html'; // Redirect to login page
    }

    // Log in the user and set the login status in localStorage
    function login() {
        localStorage.setItem('isLoggedIn', true);
    }

    // Call this function when the login is successful in index.html
    // window.onload = login; // Uncomment this line if using a function in index.html

    function showTab(tabId) {
        const tabs = document.querySelectorAll('.tab-content');
        tabs.forEach(tab => {
            tab.style.display = 'none'; // Hide all tabs
        });
        document.getElementById(tabId).style.display = 'block'; // Show the selected tab
    }
</script>

</head>

<body>
    <div class="bg-img">
    <header class="header">
        <div class="left">
            <p class="ya-sahibaz-zamaan arabic-text">ØµÙ„Ù‰ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙƒ ÙŠØ§ ÙˆÙ„ÙŠ Ø§Ù„Ø¹ØµØ± (Ø¹Ø¬) Ø£Ø¯Ø±ÙƒÙ†Ø§</p>
        </div>
        <div class="right">
            <p class="bismillah arabic-text">Ø¨Ø³Ù… Ø§Ù„Ù„Ù‡ Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ø±Ø­ÙŠÙ…</p>
        </div>
    </header>
<!-- <hr style="width: 80%; color:white;"> -->
    <nav class="navbar">
        <ul class="nav-list">
            <li class="nav-item"><a href="#" onclick="showTab('dashboard')">Home</a></li>
            <li class="nav-item"><a href="#" onclick="showTab('attendance')">Attendance</a></li>
            <li class="nav-item"><a href="#" onclick="showTab('minutesOfMeeting')">Minutes of Meeting</a></li>
            <li class="nav-item"><a href="#" onclick="showTab('checkList')">Check List</a></li>
            <li class="nav-item"><a href="#" onclick="showTab('books')">Books</a></li>

            <li class="nav-item"><a href="#" onclick="showTab('articles')">Articles</a></li>
            <li class="nav-item"><a href="#" onclick="showTab('Achievement')">Achievement</a></li>



        </ul>
    </nav>
</div>




    <div id="dashboard" class="tab-content" style="display:none;">
        <h2 class="tab-title">Welcome to Secondary Committee</h2>
        <div class="dashboard-container">
            <!-- Class Card -->
            <div class="dashboard-card" id="classCard">
                <h3>Classes</h3>
                <div id="class-AUH1" class="class-card" onclick="showClassContent('AUH1')">AUH1</div>
                <div id="class-DS3" class="class-card" onclick="showClassContent('DS3')">DS3</div>
                <div id="class-DS5" class="class-card" onclick="showClassContent('DS5')">DS5</div>
            </div>
            <!-- Content Section for Class/Report -->
            <div id="dashboardContent" class="dashboard-card"></div>
            <!-- Report Card -->
            <div class="dashboard-card" id="reportCard">
                <!-- <h3>Report</h3> -->
                <div id="reportContent"></div>
            </div>
            <!-- Pie Chart Card -->
            <div class="dashboard-card" id="pieChartCard">
                <!-- <h3>Pie Chart</h3> -->
                <div id="pieChartContent"></div>
            </div>
        </div>
    </div>
    
    

    
    <!-- Modal Structure -->
    <div id="uploadModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeModal">&times;</span>
            <div class="upload-section">
                <label for="folderSelect" class="upload-label">Select Folder:</label>
                <select id="folderSelect" class="folder-select">
                    <option value="Attendance">Attendance</option>
                    <option value="MinutesOfMeeting">Minutes of Meeting</option>
                    <option value="CheckList/Weekly">Check List - Weekly</option>
                    <option value="CheckList/Monthly">Check List - Monthly</option>
                    <option value="CheckList/Quarterly">Check List - Quarterly</option>
                    <option value="CheckList/HalfYearly">Check List - Half Yearly</option>
                    <option value="PlanningAndAchievement">Planning & Achievement</option>
                    <option value="Report/SensusReport">Report - Sensus Report</option>
                    <option value="Report/StudentReport">Report - Student Report</option>
                    <option value="Report/ClassReport">Report - Class Report</option>
                    <option value="Report/IrregularStudentReport">Report - Irregular Student Report</option>
                    <option value="Books/Tawheed">Books - Tawheed</option>
                    <option value="Books/Adl">Books - Adl</option>
                    <option value="Books/Nabuwat">Books - Nabuwat</option>
                    <option value="Books/Imamat">Books - Imamat</option>
                    <option value="Books/Qayamat">Books - Qayamat</option>
                    <option value="Books/Mahdaviyat">Books - Mahdaviyat</option>
                    <option value="Books/Ahqaam">Books - Ahqaam</option>
                    <option value="Books/General">Books - General</option>
                    <option value="Articles">Articles</option>
                    <option value="Achievement">Achievement</option>
                </select>
                <input type="file" id="fileInput" multiple class="file-input" />
                <button id="uploadButton closeModal" class="upload-button" onclick="alert('File is uploaded but it takes some time to get loaded. Please wait...')">ðŸ“¤ Upload</button>
            </div>
        </div>
    </div>
   

<!-- Sub-tabs for CheckList -->
<div class="sub-tab-nav" id="checkListSubTabs" style="display: none;">
    <button class="tab-button" onclick="showTab('checkListWeekly')">Weekly</button>
    <button class="tab-button" onclick="showTab('checkListMonthly')">Monthly</button>
    <button class="tab-button" onclick="showTab('checkListQuarterly')">Quarterly</button>
    <button class="tab-button" onclick="showTab('checkListHalfYearly')">Half Yearly</button>
</div>

<!-- Sub-tabs for Report -->
<div class="sub-tab-nav" id="reportSubTabs" style="display: none;">
    <button class="tab-button" onclick="showTab('reportSensus')">Sensus Report</button>
    <button class="tab-button" onclick="showTab('reportStudent')">Student Report</button>
    <button class="tab-button" onclick="showTab('reportClass')">Class Report</button>
    <button class="tab-button" onclick="showTab('reportIrregular')">Irregular Student Report</button>
</div>

<!-- Sub-tabs for Books -->
<div class="sub-tab-nav" id="booksSubTabs" style="display: none;">
    <button class="tab-button" onclick="showTab('booksTawheed')">Tawheed</button>
    <button class="tab-button" onclick="showTab('booksAdl')">Adl</button>
    <button class="tab-button" onclick="showTab('booksNabuwat')">Nabuwat</button>
    <button class="tab-button" onclick="showTab('booksImamat')">Imamat</button>
    <button class="tab-button" onclick="showTab('booksQayamat')">Qayamat</button>
    <button class="tab-button" onclick="showTab('booksMahdaviyat')">Mahdaviyat</button>
    <button class="tab-button" onclick="showTab('booksAhqaam')">Ahqaam</button>
    <button class="tab-button" onclick="showTab('booksGeneral')">General</button>
</div>

<div id="content" class="tab-content-wrapper">
    <div id="attendance" class="tab-content" style="display:none;">
        <h2 class="tab-title">Attendance</h2>
        <ul id="attendanceList" class="file-list"></ul>
    </div>








    <div id="minutesOfMeeting" class="tab-content" style="display:none;">
        <h2 class="tab-title">Minutes of Meeting</h2>
        <ul id="minutesOfMeetingList" class="file-list"></ul> 
    </div>















    <div id="checkList" class="tab-content" style="display:none;">
        <h2 class="tab-title">Check List</h2>
        <ul id="checkListList" class="file-list"></ul>
    </div>












    <div id="planningAchievement" class="tab-content" style="display:none;">
        <h2 class="tab-title">Planning & Achievement</h2>
        <ul id="planningAchievementList" class="file-list"></ul>
    </div>








    
    <div id="books" class="tab-content" style="display:none;">
        <div class="container">
            <div class="left-column">
                <div class="dropdown">
                    <div class="select">
                        <span class="selected">Select Books Category</span>
                        <div class="caret"></div>
                    </div>
                    <ul class="menu">
                        <li class="dropdown-item" id="tawheedDropdown">
                            <span>Tawheed</span>
                            <ul class="sub-content" id="booksTawheedList"></ul>
                        </li>
                        <li class="dropdown-item" id="adlDropdown">
                            <span>Adl</span>
                            <ul class="sub-content" id="booksAdlList"></ul>
                        </li>
                        <li class="dropdown-item" id="nabuwatDropdown">
                            <span>Nabuwat</span>
                            <ul class="sub-content" id="booksNabuwatList"></ul>
                        </li>
                        <li class="dropdown-item" id="imamatDropdown">
                            <span>Imamat</span>
                            <ul class="sub-content" id="booksImamatList"></ul>
                        </li>
                        <li class="dropdown-item" id="qayamatDropdown">
                            <span>Qayamat</span>
                            <ul class="sub-content" id="booksQayamatList"></ul>
                        </li>
                        <li class="dropdown-item" id="mahdaviyatDropdown">
                            <span>Mahdaviyat</span>
                            <ul class="sub-content" id="booksMahdaviyatList"></ul>
                        </li>
                        <li class="dropdown-item" id="ahqaamDropdown">
                            <span>Ahqaam</span>
                            <ul class="sub-content" id="booksAhqaamList"></ul>
                        </li>
                        <li class="dropdown-item" id="generalDropdown">
                            <span>General</span>
                            <ul class="sub-content" id="booksGeneralList"></ul>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="right-column">
                <iframe id="fileViewer" src="" width="100%" height="500px" style="display:none;"></iframe>
            </div>
        </div>
    </div>

    <script>
        async function fetchBooks() {
            // Fetch the list of books from GitHub
            const response = await fetch('https://api.github.com/repos/seccomm110/web-a/contents/Books');
            const books = await response.json();

            // Create a mapping of categories to their respective lists
            const categories = {
                'Tawheed': 'booksTawheedList',
                'Adl': 'booksAdlList',
                'Nabuwat': 'booksNabuwatList',
                'Imamat': 'booksImamatList',
                'Qayamat': 'booksQayamatList',
                'Mahdaviyat': 'booksMahdaviyatList',
                'Ahqaam': 'booksAhqaamList',
                'General': 'booksGeneralList'
            };

            // Clear previous content
            Object.values(categories).forEach(listId => {
                document.getElementById(listId).innerHTML = '';
            });

            // Populate dropdowns with book links
            books.forEach(book => {
                const li = document.createElement('li');
                li.textContent = book.name; // Display the file name
                li.onclick = () => showFile(book.path); // Use the file path

                // Determine which category to append to based on book name
                for (const [category, listId] of Object.entries(categories)) {
                    if (book.name.toLowerCase().includes(category.toLowerCase())) {
                        document.getElementById(listId).appendChild(li);
                    }
                }
            });
        }

        function showFile(filePath) {
            const fileViewer = document.getElementById('fileViewer');
            // Construct the Google Docs viewer URL
            const rawURL = `https://raw.githubusercontent.com/seccomm110/web-a/main/${filePath}`;
            fileViewer.src = `https://docs.google.com/viewer?url=${encodeURIComponent(rawURL)}&embedded=true`; 
            fileViewer.style.display = 'block'; // Make the iframe visible
        }

        // Call the fetchBooks function when the tab is displayed
        document.getElementById('books').addEventListener('click', () => {
            fetchBooks();
        });
    </script>

    
    



    <div id="articles" class="tab-content" style="display:none;">
        <h2 class="tab-title">Articles</h2>
        <ul id="articlesList" class="file-list"></ul>
    </div>








    <div id="Achievement" class="tab-content" style="display:none;">
        <h2 class="tab-title">Achievement</h2>
        <ul id="AchievementList" class="file-list"></ul>
    </div>














    <!-- Sub-content for Check List -->
    <div id="checkListWeekly" class="tab-content" style="display:none;">
        <h2 class="tab-title">Check List - Weekly</h2>
        <ul id="checkListWeeklyList" class="file-list"></ul>
    </div>
    <div id="checkListMonthly" class="tab-content" style="display:none;">
        <h2 class="tab-title">Check List - Monthly</h2>
        <ul id="checkListMonthlyList" class="file-list"></ul>
    </div>
    <div id="checkListQuarterly" class="tab-content" style="display:none;">
        <h2 class="tab-title">Check List - Quarterly</h2>
        <ul id="checkListQuarterlyList" class="file-list"></ul>
    </div>
    <div id="checkListHalfYearly" class="tab-content" style="display:none;">
        <h2 class="tab-title">Check List - Half Yearly</h2>
        <ul id="checkListHalfYearlyList" class="file-list"></ul>
    </div>

    <!-- Sub-content for Books -->
    <div id="booksTawheed" class="tab-content" style="display:none;">
        <h2 class="tab-title">Books - Tawheed</h2>
        <ul id="booksTawheedList" class="file-list"></ul>
    </div>
    <div id="booksAdl" class="tab-content" style="display:none;">
        <h2 class="tab-title">Books - Adl</h2>
        <ul id="booksAdlList" class="file-list"></ul>
    </div>
    <div id="booksNabuwat" class="tab-content" style="display:none;">
        <h2 class="tab-title">Books - Nabuwat</h2>
        <ul id="booksNabuwatList" class="file-list"></ul>
    </div>
    <div id="booksImamat" class="tab-content" style="display:none;">
        <h2 class="tab-title">Books - Imamat</h2>
        <ul id="booksImamatList" class="file-list"></ul>
    </div>
    <div id="booksQayamat" class="tab-content" style="display:none;">
        <h2 class="tab-title">Books - Qayamat</h2>
        <ul id="booksQayamatList" class="file-list"></ul>
    </div>
    <div id="booksMahdaviyat" class="tab-content" style="display:none;">
        <h2 class="tab-title">Books - Mahdaviyat</h2>
        <ul id="booksMahdaviyatList" class="file-list"></ul>
    </div>
    <div id="booksAhqaam" class="tab-content" style="display:none;">
        <h2 class="tab-title">Books - Ahqaam</h2>
        <ul id="booksAhqaamList" class="file-list"></ul>
    </div>
    <div id="booksGeneral" class="tab-content" style="display:none;">
        <h2 class="tab-title">Books - General</h2>
        <ul id="booksGeneralList" class="file-list"></ul>
    </div>
</div>



<br><br><br><br> <br><br>
<!-- Upload Icon -->
<div class="upload-button bottom-right" id="uploadIcon" style="cursor: pointer;">
    <span class="upload-icon" id="uploadButton">ðŸ“¤</span>
</div>


    <script src="css & js/script.js"></script>
    <script src="css & js/dashboard.js"></script>
</body>
</html>
